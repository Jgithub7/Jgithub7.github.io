<!DOCTYPE html>
<html>
<head>
    <!-- <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <title>Robot AR</title>
    <script src="aframe.min.js"></script>
    <script src="aframe-ar.js"></script>
	  <script src="aframe-extras.min.js"></script>

    <script src="jquery-3.6.0.min.js"></script>

    <link rel="stylesheet" href="styles.css">

</head>
<body style="margin : 0px; overflow: hidden;">

    <a-scene markers_start embedded arjs vr-mode-ui="enabled: false">
  
      <a-assets>
        <a-asset-item id="marsrobot" src="./robotTalkingIntroloop.gltf"></a-asset-item>
      </a-assets>
  
      <a-marker registerevents type="pattern" url="./pattern-Robot_AR.patt" >
        <a-entity position="0 0 0" rotation="0 0 0" scale="1 1 1" gltf-model="#marsrobot" sound="src: #MarsRobotSound; volume: 10; loop: true" >
        </a-entity>
      </a-marker>
  
      <a-assets>
        <audio id="MarsRobotSound" src="intro_english.mp3"></audio>
      </a-assets>
  
      <a-entity camera></a-entity>
    </a-scene>
  
  
  </body>
  
  <script>
  //Detect marker found and lost
  AFRAME.registerComponent('registerevents', {
          init: function () {
              const marker = this.el;
  
              marker.addEventListener("markerFound", ()=> {
  
            var sceneEl = document.querySelector('a-entity');
            sceneEl.setAttribute('animation-mixer', '');
  
            var entity = document.querySelector('[sound]');
            entity.components.sound.playSound();
  
          console.log('Marker found');
  
              });
  /*
              marker.addEventListener("markerLost",() =>{
  
          var sceneEl = document.querySelector('a-entity');
          sceneEl.removeAttribute('animation-mixer');
  
          var entity = document.querySelector('[sound]');
          entity.components.sound.stopSound();
  
          console.log(sceneEl);
  
                  console.log('Marker Lost ');
              });*/
          },
      });
  
  </script>
  </html>